<section class="chapter-section">
    <h2>Type guards (typeof, instanceof, user-defined guards)</h2>
    <p>Type guards jsou výrazy, které provádějí kontrolu typů za běhu, umožňují TypeScriptu odvodit typy v určitých blocích kódu.</p>
    <pre><code>// Základní type guards pomocí typeof
function zpracujHodnotu(hodnota: string | number): string {
    if (typeof hodnota === "string") {
        // TypeScript ví, že hodnota je string
        return hodnota.toUpperCase();
    } else {
        // TypeScript ví, že hodnota je number
        return hodnota.toFixed(2);
    }
}

// Type guard pomocí instanceof pro práci s třídami
class Zamestnanec {
    jmeno: string;
    plat: number;
    
    constructor(jmeno: string, plat: number) {
        this.jmeno = jmeno;
        this.plat = plat;
    }
    
    dejOdmenu(): number {
        return this.plat * 0.1;
    }
}

class Kontraktor {
    jmeno: string;
    hodinovaSazba: number;
    
    constructor(jmeno: string, hodinovaSazba: number) {
        this.jmeno = jmeno;
        this.hodinovaSazba = hodinovaSazba;
    }
    
    vypoctiMzdu(hodiny: number): number {
        return this.hodinovaSazba * hodiny;
    }
}

function zpracujPracovnika(osoba: Zamestnanec | Kontraktor): string {
    let vysledek = `Jméno: ${osoba.jmeno}, `;
    
    if (osoba instanceof Zamestnanec) {
        // TypeScript ví, že osoba je instance Zamestnanec
        vysledek += `Odměna: ${osoba.dejOdmenu()} Kč`;
    } else {
        // TypeScript ví, že osoba je instance Kontraktor
        vysledek += `Hodinová sazba: ${osoba.hodinovaSazba} Kč`;
    }
    
    return vysledek;
}</code></pre>
</section>